@using SummonersGift.Data;
@using SummonersGift.Models;
@using SummonersGift.Models.Riot;
@using SummonersGift.Models.View;
@using SummonersGift.Web;
@model DataFetchResult<Tuple<SummonerBasicViewModel, List<Match>, StatBasicViewModel[]>>


@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    ViewBag.Title = "Index";
}

<h2>Summoner Information</h2>

@{ if (@Model.Success)
    {
    var summoner = Model.GetResult.Item1;
    var matches = Model.GetResult.Item2;
    var stats = Model.GetResult.Item3;

    <h3>@summoner.Name</h3>

    <p>Level: @summoner.SummonerLevel</p>

    <p>Last active on: @summoner.RevisionDate</p>

    <p>Rank: @summoner.DisplayRank</p>

    if (!(stats==null))
    {
        foreach (var row in stats)
        {
    <p>@row.StatName : @row.SampleMean : @row.SummonerMean</p>
        }
    }

    foreach (Match i in Model.GetResult.Item2)
    {
    @Html.Partial("~/Views/Shared/_MatchPartial.cshtml", i);
    }
}
else
{
    <p>No summoner information found...</p>
    <p>@Model.ErrorMessage</p>
}

    <p>Api calls: @Model.ApiCalls</p>
    <p>Time taken: @Model.TimeTaken.TotalSeconds</p>

}

